/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/geoip-lite";
exports.ids = ["vendor-chunks/geoip-lite"];
exports.modules = {

/***/ "(rsc)/./node_modules/geoip-lite/lib/fsWatcher.js":
/*!**************************************************!*\
  !*** ./node_modules/geoip-lite/lib/fsWatcher.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var fs = __webpack_require__(/*! fs */ \"fs\"),\n\tpath = __webpack_require__(/*! path */ \"path\"),\n\tFSWatcher = {};\n\n/**\n * Takes a directory/file and watch for change. Upon change, call the\n * callback.\n *\n * @param {String} name: name of this watcher\n * @param {String} directory: path to the directory to watch\n * @param {String} [filename]: (optional) specific filename to watch for,\n *     watches for all files in the directory if unspecified\n * @param {Integer} cooldownDelay: delay to wait before triggering the callback\n * @param {Function} callback: function () : called when changes are detected\n**/\nfunction makeFsWatchFilter(name, directory, filename, cooldownDelay, callback) {\n\tvar cooldownId = null;\n\n\t//Delete the cooldownId and callback the outer function\n\tfunction timeoutCallback() {\n\t\tcooldownId = null;\n\t\tcallback();\n\t}\n\n\t//This function is called when there is a change in the data directory\n\t//It sets a timer to wait for the change to be completed\n\tfunction onWatchEvent(event, changedFile) {\n\t\t// check to make sure changedFile is not null\n\t\tif (!changedFile) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar filePath = path.join(directory, changedFile);\n\n\t\tif (!filename || filename === changedFile) {\n\t\t\tfs.exists(filePath, function onExists(exists) {\n\t\t\t\tif (!exists) {\n\t\t\t\t\t// if the changed file no longer exists, it was a deletion.\n\t\t\t\t\t// we ignore deleted files\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//At this point, a new file system activity has been detected,\n\t\t\t\t//We have to wait for file transfert to be finished before moving on.\n\n\t\t\t\t//If a cooldownId already exists, we delete it\n\t\t\t\tif (cooldownId !== null) {\n\t\t\t\t\tclearTimeout(cooldownId);\n\t\t\t\t\tcooldownId = null;\n\t\t\t\t}\n\n\t\t\t\t//Once the cooldownDelay has passed, the timeoutCallback function will be called\n\t\t\t\tcooldownId = setTimeout(timeoutCallback, cooldownDelay);\n\t\t\t});\n\t\t}\n\t}\n\n\t//Manage the case where filename is missing (because it's optionnal)\n\tif (typeof cooldownDelay === 'function') {\n\t\tcallback = cooldownDelay;\n\t\tcooldownDelay = filename;\n\t\tfilename = null;\n\t}\n\n\tif (FSWatcher[name]) {\n\t\tstopWatching(name);\n\t}\n\n\tFSWatcher[name] = fs.watch(directory, onWatchEvent);\n}\n\n/**\n * Take a FSWatcher object and close it.\n *\n * @param {string} name: name of the watcher to close\n *\n**/\nfunction stopWatching(name) {\n\tFSWatcher[name].close();\n}\n\nmodule.exports.makeFsWatchFilter = makeFsWatchFilter;\nmodule.exports.stopWatching = stopWatching;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2VvaXAtbGl0ZS9saWIvZnNXYXRjaGVyLmpzIiwibWFwcGluZ3MiOiJBQUFBLFNBQVMsbUJBQU8sQ0FBQyxjQUFJO0FBQ3JCLFFBQVEsbUJBQU8sQ0FBQyxrQkFBTTtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0NBQWdDO0FBQ2hDLDJCQUEyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Fhc3VyanlhLXBvcnRmb2xpby8uL25vZGVfbW9kdWxlcy9nZW9pcC1saXRlL2xpYi9mc1dhdGNoZXIuanM/NWQyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZnMgPSByZXF1aXJlKCdmcycpLFxuXHRwYXRoID0gcmVxdWlyZSgncGF0aCcpLFxuXHRGU1dhdGNoZXIgPSB7fTtcblxuLyoqXG4gKiBUYWtlcyBhIGRpcmVjdG9yeS9maWxlIGFuZCB3YXRjaCBmb3IgY2hhbmdlLiBVcG9uIGNoYW5nZSwgY2FsbCB0aGVcbiAqIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lOiBuYW1lIG9mIHRoaXMgd2F0Y2hlclxuICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdG9yeTogcGF0aCB0byB0aGUgZGlyZWN0b3J5IHRvIHdhdGNoXG4gKiBAcGFyYW0ge1N0cmluZ30gW2ZpbGVuYW1lXTogKG9wdGlvbmFsKSBzcGVjaWZpYyBmaWxlbmFtZSB0byB3YXRjaCBmb3IsXG4gKiAgICAgd2F0Y2hlcyBmb3IgYWxsIGZpbGVzIGluIHRoZSBkaXJlY3RvcnkgaWYgdW5zcGVjaWZpZWRcbiAqIEBwYXJhbSB7SW50ZWdlcn0gY29vbGRvd25EZWxheTogZGVsYXkgdG8gd2FpdCBiZWZvcmUgdHJpZ2dlcmluZyB0aGUgY2FsbGJhY2tcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrOiBmdW5jdGlvbiAoKSA6IGNhbGxlZCB3aGVuIGNoYW5nZXMgYXJlIGRldGVjdGVkXG4qKi9cbmZ1bmN0aW9uIG1ha2VGc1dhdGNoRmlsdGVyKG5hbWUsIGRpcmVjdG9yeSwgZmlsZW5hbWUsIGNvb2xkb3duRGVsYXksIGNhbGxiYWNrKSB7XG5cdHZhciBjb29sZG93bklkID0gbnVsbDtcblxuXHQvL0RlbGV0ZSB0aGUgY29vbGRvd25JZCBhbmQgY2FsbGJhY2sgdGhlIG91dGVyIGZ1bmN0aW9uXG5cdGZ1bmN0aW9uIHRpbWVvdXRDYWxsYmFjaygpIHtcblx0XHRjb29sZG93bklkID0gbnVsbDtcblx0XHRjYWxsYmFjaygpO1xuXHR9XG5cblx0Ly9UaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIGEgY2hhbmdlIGluIHRoZSBkYXRhIGRpcmVjdG9yeVxuXHQvL0l0IHNldHMgYSB0aW1lciB0byB3YWl0IGZvciB0aGUgY2hhbmdlIHRvIGJlIGNvbXBsZXRlZFxuXHRmdW5jdGlvbiBvbldhdGNoRXZlbnQoZXZlbnQsIGNoYW5nZWRGaWxlKSB7XG5cdFx0Ly8gY2hlY2sgdG8gbWFrZSBzdXJlIGNoYW5nZWRGaWxlIGlzIG5vdCBudWxsXG5cdFx0aWYgKCFjaGFuZ2VkRmlsZSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHR2YXIgZmlsZVBhdGggPSBwYXRoLmpvaW4oZGlyZWN0b3J5LCBjaGFuZ2VkRmlsZSk7XG5cblx0XHRpZiAoIWZpbGVuYW1lIHx8IGZpbGVuYW1lID09PSBjaGFuZ2VkRmlsZSkge1xuXHRcdFx0ZnMuZXhpc3RzKGZpbGVQYXRoLCBmdW5jdGlvbiBvbkV4aXN0cyhleGlzdHMpIHtcblx0XHRcdFx0aWYgKCFleGlzdHMpIHtcblx0XHRcdFx0XHQvLyBpZiB0aGUgY2hhbmdlZCBmaWxlIG5vIGxvbmdlciBleGlzdHMsIGl0IHdhcyBhIGRlbGV0aW9uLlxuXHRcdFx0XHRcdC8vIHdlIGlnbm9yZSBkZWxldGVkIGZpbGVzXG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly9BdCB0aGlzIHBvaW50LCBhIG5ldyBmaWxlIHN5c3RlbSBhY3Rpdml0eSBoYXMgYmVlbiBkZXRlY3RlZCxcblx0XHRcdFx0Ly9XZSBoYXZlIHRvIHdhaXQgZm9yIGZpbGUgdHJhbnNmZXJ0IHRvIGJlIGZpbmlzaGVkIGJlZm9yZSBtb3Zpbmcgb24uXG5cblx0XHRcdFx0Ly9JZiBhIGNvb2xkb3duSWQgYWxyZWFkeSBleGlzdHMsIHdlIGRlbGV0ZSBpdFxuXHRcdFx0XHRpZiAoY29vbGRvd25JZCAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dChjb29sZG93bklkKTtcblx0XHRcdFx0XHRjb29sZG93bklkID0gbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vT25jZSB0aGUgY29vbGRvd25EZWxheSBoYXMgcGFzc2VkLCB0aGUgdGltZW91dENhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkXG5cdFx0XHRcdGNvb2xkb3duSWQgPSBzZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFjaywgY29vbGRvd25EZWxheSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvL01hbmFnZSB0aGUgY2FzZSB3aGVyZSBmaWxlbmFtZSBpcyBtaXNzaW5nIChiZWNhdXNlIGl0J3Mgb3B0aW9ubmFsKVxuXHRpZiAodHlwZW9mIGNvb2xkb3duRGVsYXkgPT09ICdmdW5jdGlvbicpIHtcblx0XHRjYWxsYmFjayA9IGNvb2xkb3duRGVsYXk7XG5cdFx0Y29vbGRvd25EZWxheSA9IGZpbGVuYW1lO1xuXHRcdGZpbGVuYW1lID0gbnVsbDtcblx0fVxuXG5cdGlmIChGU1dhdGNoZXJbbmFtZV0pIHtcblx0XHRzdG9wV2F0Y2hpbmcobmFtZSk7XG5cdH1cblxuXHRGU1dhdGNoZXJbbmFtZV0gPSBmcy53YXRjaChkaXJlY3RvcnksIG9uV2F0Y2hFdmVudCk7XG59XG5cbi8qKlxuICogVGFrZSBhIEZTV2F0Y2hlciBvYmplY3QgYW5kIGNsb3NlIGl0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lOiBuYW1lIG9mIHRoZSB3YXRjaGVyIHRvIGNsb3NlXG4gKlxuKiovXG5mdW5jdGlvbiBzdG9wV2F0Y2hpbmcobmFtZSkge1xuXHRGU1dhdGNoZXJbbmFtZV0uY2xvc2UoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMubWFrZUZzV2F0Y2hGaWx0ZXIgPSBtYWtlRnNXYXRjaEZpbHRlcjtcbm1vZHVsZS5leHBvcnRzLnN0b3BXYXRjaGluZyA9IHN0b3BXYXRjaGluZztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/geoip-lite/lib/fsWatcher.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/geoip-lite/lib/geoip.js":
/*!**********************************************!*\
  !*** ./node_modules/geoip-lite/lib/geoip.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var fs = __webpack_require__(/*! fs */ \"fs\");\nvar net = __webpack_require__(/*! net */ \"net\");\nvar path = __webpack_require__(/*! path */ \"path\");\n\nfs.existsSync = fs.existsSync || path.existsSync;\n\nvar utils = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/geoip-lite/lib/utils.js\");\nvar fsWatcher = __webpack_require__(/*! ./fsWatcher */ \"(rsc)/./node_modules/geoip-lite/lib/fsWatcher.js\");\nvar async = __webpack_require__(/*! async */ \"(rsc)/./node_modules/async/dist/async.js\");\n\nvar watcherName = 'dataWatcher';\n\nvar geodatadir = path.resolve(\n\t__dirname,\n\tglobal.geodatadir || process.env.GEODATADIR || '../data/'\n);\n\nvar dataFiles = {\n\tcity: path.join(geodatadir, 'geoip-city.dat'),\n\tcity6: path.join(geodatadir, 'geoip-city6.dat'),\n\tcityNames: path.join(geodatadir, 'geoip-city-names.dat'),\n\tcountry: path.join(geodatadir, 'geoip-country.dat'),\n\tcountry6: path.join(geodatadir, 'geoip-country6.dat')\n};\n\nvar privateRange4 = [\n\t[utils.aton4('10.0.0.0'), utils.aton4('10.255.255.255')],\n\t[utils.aton4('172.16.0.0'), utils.aton4('172.31.255.255')],\n\t[utils.aton4('192.168.0.0'), utils.aton4('192.168.255.255')]\n];\n\nvar conf4 = {\n\tfirstIP: null,\n\tlastIP: null,\n\tlastLine: 0,\n\tlocationBuffer: null,\n\tlocationRecordSize: 88,\n\tmainBuffer: null,\n\trecordSize: 24\n};\n\nvar conf6 = {\n\tfirstIP: null,\n\tlastIP: null,\n\tlastLine: 0,\n\tmainBuffer: null,\n\trecordSize: 48\n};\n\n//copy original configs\nvar cache4 = JSON.parse(JSON.stringify(conf4));\nvar cache6 = JSON.parse(JSON.stringify(conf6));\n\nvar RECORD_SIZE = 10;\nvar RECORD_SIZE6 = 34;\n\nfunction lookup4(ip) {\n\tvar fline = 0;\n\tvar floor = cache4.lastIP;\n\tvar cline = cache4.lastLine;\n\tvar ceil = cache4.firstIP;\n\tvar line;\n\tvar locId;\n\n\tvar buffer = cache4.mainBuffer;\n\tvar locBuffer = cache4.locationBuffer;\n\tvar privateRange = privateRange4;\n\tvar recordSize = cache4.recordSize;\n\tvar locRecordSize = cache4.locationRecordSize;\n\n\tvar i;\n\n\tvar geodata = {\n\t\trange: '',\n\t\tcountry: '',\n\t\tregion: '',\n\t\teu:'',\n\t\ttimezone:'',\n\t\tcity: '',\n\t\tll: [null, null]\n\t};\n\n\t// outside IPv4 range\n\tif (ip > cache4.lastIP || ip < cache4.firstIP) {\n\t\treturn null;\n\t}\n\n\t// private IP\n\tfor (i = 0; i < privateRange.length; i++) {\n\t\tif (ip >= privateRange[i][0] && ip <= privateRange[i][1]) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tdo {\n\t\tline = Math.round((cline - fline) / 2) + fline;\n\t\tfloor = buffer.readUInt32BE(line * recordSize);\n\t\tceil  = buffer.readUInt32BE((line * recordSize) + 4);\n\n\t\tif (floor <= ip && ceil >= ip) {\n\t\t\tgeodata.range = [floor, ceil];\n\n\t\t\tif (recordSize === RECORD_SIZE) {\n\t\t\t\tgeodata.country = buffer.toString('utf8', (line * recordSize) + 8, (line * recordSize) + 10);\n\t\t\t} else {\n\t\t\t\tlocId = buffer.readUInt32BE((line * recordSize) + 8);\n\n\t\t\t\t// -1>>>0 is a marker for \"No Location Info\"\n\t\t\t\tif(-1>>>0 > locId) {\n\t\t\t\t\tgeodata.country = locBuffer.toString('utf8', (locId * locRecordSize) + 0, (locId * locRecordSize) + 2).replace(/\\u0000.*/, '');\n\t\t\t\t\tgeodata.region = locBuffer.toString('utf8', (locId * locRecordSize) + 2, (locId * locRecordSize) + 5).replace(/\\u0000.*/, '');\n\t\t\t\t\tgeodata.metro = locBuffer.readInt32BE((locId * locRecordSize) + 5);\n\t\t\t\t\tgeodata.ll[0] = buffer.readInt32BE((line * recordSize) + 12)/10000;//latitude\n\t\t\t\t\tgeodata.ll[1] = buffer.readInt32BE((line * recordSize) + 16)/10000; //longitude\n\t\t\t\t\tgeodata.area = buffer.readUInt32BE((line * recordSize) + 20); //longitude\n\t\t\t\t\tgeodata.eu = locBuffer.toString('utf8', (locId * locRecordSize) + 9, (locId * locRecordSize) + 10).replace(/\\u0000.*/, '');\n\t\t\t\t\tgeodata.timezone = locBuffer.toString('utf8', (locId * locRecordSize) + 10, (locId * locRecordSize) + 42).replace(/\\u0000.*/, '');\n\t\t\t\t\tgeodata.city = locBuffer.toString('utf8', (locId * locRecordSize) + 42, (locId * locRecordSize) + locRecordSize).replace(/\\u0000.*/, '');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn geodata;\n\t\t} else if (fline === cline) {\n\t\t\treturn null;\n\t\t} else if (fline === (cline - 1)) {\n\t\t\tif (line === fline) {\n\t\t\t\tfline = cline;\n\t\t\t} else {\n\t\t\t\tcline = fline;\n\t\t\t}\n\t\t} else if (floor > ip) {\n\t\t\tcline = line;\n\t\t} else if (ceil < ip) {\n\t\t\tfline = line;\n\t\t}\n\t} while(1);\n}\n\nfunction lookup6(ip) {\n\tvar buffer = cache6.mainBuffer;\n\tvar recordSize = cache6.recordSize;\n\tvar locBuffer = cache4.locationBuffer;\n\tvar locRecordSize = cache4.locationRecordSize;\n\n\tvar geodata = {\n\t\trange: '',\n\t\tcountry: '',\n\t\tregion: '',\n\t\tcity: '',\n\t\tll: [0, 0]\n\t};\n\tfunction readip(line, offset) {\n\t\tvar ii = 0;\n\t\tvar ip = [];\n\n\t\tfor (ii = 0; ii < 2; ii++) {\n\t\t\tip.push(buffer.readUInt32BE((line * recordSize) + (offset * 16) + (ii * 4)));\n\t\t}\n\n\t\treturn ip;\n\t}\n\n\tcache6.lastIP = readip(cache6.lastLine, 1);\n\tcache6.firstIP = readip(0, 0);\n\n\tvar fline = 0;\n\tvar floor = cache6.lastIP;\n\tvar cline = cache6.lastLine;\n\tvar ceil = cache6.firstIP;\n\tvar line;\n\tvar locId;\n\n\tif (utils.cmp6(ip, cache6.lastIP) > 0 || utils.cmp6(ip, cache6.firstIP) < 0) {\n\t\treturn null;\n\t}\n\n\tdo {\n\t\tline = Math.round((cline - fline) / 2) + fline;\n\t\tfloor = readip(line, 0);\n\t\tceil  = readip(line, 1);\n\n\t\tif (utils.cmp6(floor, ip) <= 0 && utils.cmp6(ceil, ip) >= 0) {\n\t\t\tif (recordSize === RECORD_SIZE6) {\n\t\t\t\tgeodata.country = buffer.toString('utf8', (line * recordSize) + 32, (line * recordSize) + 34).replace(/\\u0000.*/, '');\n\t\t\t} else {\n\t\t\t\tlocId = buffer.readUInt32BE((line * recordSize) + 32);\n\n\t\t\t\t// -1>>>0 is a marker for \"No Location Info\"\n\t\t\t\tif(-1>>>0 > locId) {\n\t\t\t\t\tgeodata.country = locBuffer.toString('utf8', (locId * locRecordSize) + 0, (locId * locRecordSize) + 2).replace(/\\u0000.*/, '');\n\t\t\t\t\tgeodata.region = locBuffer.toString('utf8', (locId * locRecordSize) + 2, (locId * locRecordSize) + 5).replace(/\\u0000.*/, '');\n\t\t\t\t\tgeodata.metro = locBuffer.readInt32BE((locId * locRecordSize) + 5);\n\t\t\t\t\tgeodata.ll[0] = buffer.readInt32BE((line * recordSize) + 36)/10000;//latitude\n\t\t\t\t\tgeodata.ll[1] = buffer.readInt32BE((line * recordSize) + 40)/10000; //longitude\n\t\t\t\t\tgeodata.area = buffer.readUInt32BE((line * recordSize) + 44); //area\n\t\t\t\t\tgeodata.eu = locBuffer.toString('utf8', (locId * locRecordSize) + 9, (locId * locRecordSize) + 10).replace(/\\u0000.*/, '');\n\t\t\t\t\tgeodata.timezone = locBuffer.toString('utf8', (locId * locRecordSize) + 10, (locId * locRecordSize) + 42).replace(/\\u0000.*/, '');\n\t\t\t\t\tgeodata.city = locBuffer.toString('utf8', (locId * locRecordSize) + 42, (locId * locRecordSize) + locRecordSize).replace(/\\u0000.*/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t\t// We do not currently have detailed region/city info for IPv6, but finally have coords\n\t\t\treturn geodata;\n\t\t} else if (fline === cline) {\n\t\t\treturn null;\n\t\t} else if (fline === (cline - 1)) {\n\t\t\tif (line === fline) {\n\t\t\t\tfline = cline;\n\t\t\t} else {\n\t\t\t\tcline = fline;\n\t\t\t}\n\t\t} else if (utils.cmp6(floor, ip) > 0) {\n\t\t\tcline = line;\n\t\t} else if (utils.cmp6(ceil, ip) < 0) {\n\t\t\tfline = line;\n\t\t}\n\t} while(1);\n}\n\nfunction get4mapped(ip) {\n\tvar ipv6 = ip.toUpperCase();\n\tvar v6prefixes = ['0:0:0:0:0:FFFF:', '::FFFF:'];\n\tfor (var i = 0; i < v6prefixes.length; i++) {\n\t\tvar v6prefix = v6prefixes[i];\n\t\tif (ipv6.indexOf(v6prefix) == 0) {\n\t\t\treturn ipv6.substring(v6prefix.length);\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction preload(callback) {\n\tvar datFile;\n\tvar datSize;\n\tvar asyncCache = JSON.parse(JSON.stringify(conf4));\n\n\t//when the preload function receives a callback, do the task asynchronously\n\tif (typeof arguments[0] === 'function') {\n\t\tasync.series([\n\t\t\tfunction (cb) {\n\t\t\t\tasync.series([\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.open(dataFiles.cityNames, 'r', function (err, file) {\n\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\tasyncCache.locationBuffer = Buffer.alloc(datSize);\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.read(datFile, asyncCache.locationBuffer, 0, datSize, 0, cb2);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.close(datFile, cb2);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.open(dataFiles.city, 'r', function (err, file) {\n\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tif (err.code !== 'ENOENT' && err.code !== 'EBADF') {\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfs.open(dataFiles.country, 'r', function (err, file) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tcb(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\t\t\tasyncCache.recordSize = RECORD_SIZE;\n\n\t\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcb();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tfunction () {\n\t\t\t\tasyncCache.mainBuffer = Buffer.alloc(datSize);\n\t\t\t\t\n\t\t\t\tasync.series([\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.read(datFile, asyncCache.mainBuffer, 0, datSize, 0, cb2);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.close(datFile, cb2);\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\t//keep old cache\n\t\t\t\t\t} else {\n\t\t\t\t\t\tasyncCache.lastLine = (datSize / asyncCache.recordSize) - 1;\n\t\t\t\t\t\tasyncCache.lastIP = asyncCache.mainBuffer.readUInt32BE((asyncCache.lastLine * asyncCache.recordSize) + 4);\n\t\t\t\t\t\tasyncCache.firstIP = asyncCache.mainBuffer.readUInt32BE(0);\n\t\t\t\t\t\tcache4 = asyncCache;\n\t\t\t\t\t}\n\t\t\t\t\tcallback(err);\n\t\t\t\t});\n\t\t\t}\n\t\t]);\n\t} else {\n\t\ttry {\n\t\t\tdatFile = fs.openSync(dataFiles.cityNames, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\n\t\t\tif (datSize === 0) {\n\t\t\t\tthrow {\n\t\t\t\t\tcode: 'EMPTY_FILE'\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcache4.locationBuffer = Buffer.alloc(datSize);\n\t\t\tfs.readSync(datFile, cache4.locationBuffer, 0, datSize, 0);\n\t\t\tfs.closeSync(datFile);\n\n\t\t\tdatFile = fs.openSync(dataFiles.city, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\t\t} catch(err) {\n\t\t\tif (err.code !== 'ENOENT' && err.code !== 'EBADF' && err.code !== 'EMPTY_FILE') {\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tdatFile = fs.openSync(dataFiles.country, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\t\t\tcache4.recordSize = RECORD_SIZE;\n\t\t}\n\n\t\tcache4.mainBuffer = Buffer.alloc(datSize);\n\t\tfs.readSync(datFile, cache4.mainBuffer, 0, datSize, 0);\n\n\t\tfs.closeSync(datFile);\n\n\t\tcache4.lastLine = (datSize / cache4.recordSize) - 1;\n\t\tcache4.lastIP = cache4.mainBuffer.readUInt32BE((cache4.lastLine * cache4.recordSize) + 4);\n\t\tcache4.firstIP = cache4.mainBuffer.readUInt32BE(0);\n\t}\n}\n\nfunction preload6(callback) {\n\tvar datFile;\n\tvar datSize;\n\tvar asyncCache6 = JSON.parse(JSON.stringify(conf6));\n\n\t//when the preload function receives a callback, do the task asynchronously\n\tif (typeof arguments[0] === 'function') {\n\t\tasync.series([\n\t\t\tfunction (cb) {\n\t\t\t\tasync.series([\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.open(dataFiles.city6, 'r', function (err, file) {\n\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tif (err.code !== 'ENOENT' && err.code !== 'EBADF') {\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfs.open(dataFiles.country6, 'r', function (err, file) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tcb(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\t\t\tasyncCache6.recordSize = RECORD_SIZE6;\n\n\t\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcb();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tfunction () {\n\t\t\t\tasyncCache6.mainBuffer = Buffer.alloc(datSize);\n\t\t\t\t\n\t\t\t\tasync.series([\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.read(datFile, asyncCache6.mainBuffer, 0, datSize, 0, cb2);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.close(datFile, cb2);\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\t//keep old cache\n\t\t\t\t\t} else {\n\t\t\t\t\t\tasyncCache6.lastLine = (datSize / asyncCache6.recordSize) - 1;\n\t\t\t\t\t\tcache6 = asyncCache6;\n\t\t\t\t\t}\n\t\t\t\t\tcallback(err);\n\t\t\t\t});\n\t\t\t}\n\t\t]);\n\t} else {\n\t\ttry {\n\t\t\tdatFile = fs.openSync(dataFiles.city6, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\n\t\t\tif (datSize === 0) {\n\t\t\t\tthrow {\n\t\t\t\t\tcode: 'EMPTY_FILE'\n\t\t\t\t};\n\t\t\t}\n\t\t} catch(err) {\n\t\t\tif (err.code !== 'ENOENT' && err.code !== 'EBADF' && err.code !== 'EMPTY_FILE') {\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tdatFile = fs.openSync(dataFiles.country6, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\t\t\tcache6.recordSize = RECORD_SIZE6;\n\t\t}\n\n\t\tcache6.mainBuffer = Buffer.alloc(datSize);\n\t\tfs.readSync(datFile, cache6.mainBuffer, 0, datSize, 0);\n\n\t\tfs.closeSync(datFile);\n\n\t\tcache6.lastLine = (datSize / cache6.recordSize) - 1;\n\t}\n}\n\nmodule.exports = {\n\tcmp: utils.cmp,\n\n\tlookup: function(ip) {\n\t\tif (!ip) {\n\t\t\treturn null;\n\t\t} else if (typeof ip === 'number') {\n\t\t\treturn lookup4(ip);\n\t\t} else if (net.isIP(ip) === 4) {\n\t\t\treturn lookup4(utils.aton4(ip));\n\t\t} else if (net.isIP(ip) === 6) {\n\t\t\tvar ipv4 = get4mapped(ip);\n\t\t\tif (ipv4) {\n\t\t\t\treturn lookup4(utils.aton4(ipv4));\n\t\t\t} else {\n\t\t\t\treturn lookup6(utils.aton6(ip));\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tpretty: function(n) {\n\t\tif (typeof n === 'string') {\n\t\t\treturn n;\n\t\t} else if (typeof n === 'number') {\n\t\t\treturn utils.ntoa4(n);\n\t\t} else if (n instanceof Array) {\n\t\t\treturn utils.ntoa6(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// Start watching for data updates. The watcher waits one minute for file transfer to \n\t// completete before triggering the callback.\n\tstartWatchingDataUpdate: function (callback) {\n\t\tfsWatcher.makeFsWatchFilter(watcherName, geodatadir, 60*1000, function () {\n\t\t\t//Reload data\n\t\t\tasync.series([\n\t\t\t\tfunction (cb) {\n\t\t\t\t\tpreload(cb);\n\t\t\t\t},\n\t\t\t\tfunction (cb) {\n\t\t\t\t\tpreload6(cb);\n\t\t\t\t}\n\t\t\t], callback);\n\t\t});\n\t},\n\n\t// Stop watching for data updates.\n\tstopWatchingDataUpdate: function () {\n\t\tfsWatcher.stopWatching(watcherName);\n\t},\n    \n\t//clear data\n\tclear: function () {\n\t\tcache4 = JSON.parse(JSON.stringify(conf4));\n\t\tcache6 = JSON.parse(JSON.stringify(conf6));\n\t},\n\t\n\t// Reload data synchronously\n\treloadDataSync: function () {\n\t\tpreload();\n\t\tpreload6();\n\t},\n\t\n\t// Reload data asynchronously\n\treloadData: function (callback) {\n\t\t//Reload data\n\t\tasync.series([\n\t\t\tfunction (cb) {\n\t\t\t\tpreload(cb);\n\t\t\t},\n\t\t\tfunction (cb) {\n\t\t\t\tpreload6(cb);\n\t\t\t}\n\t\t], callback);\n\t},\n};\n\npreload();\npreload6();\n\n//lookup4 = gen_lookup('geoip-country.dat', 4);\n//lookup6 = gen_lookup('geoip-country6.dat', 16);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2VvaXAtbGl0ZS9saWIvZ2VvaXAuanMiLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxtQkFBTyxDQUFDLGNBQUk7QUFDckIsVUFBVSxtQkFBTyxDQUFDLGdCQUFLO0FBQ3ZCLFdBQVcsbUJBQU8sQ0FBQyxrQkFBTTs7QUFFekI7O0FBRUEsWUFBWSxtQkFBTyxDQUFDLDZEQUFTO0FBQzdCLGdCQUFnQixtQkFBTyxDQUFDLHFFQUFhO0FBQ3JDLFlBQVksbUJBQU8sQ0FBQyx1REFBTzs7QUFFM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLHlCQUF5QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RTtBQUN4RSx5RUFBeUU7QUFDekUsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RTtBQUN4RSx5RUFBeUU7QUFDekUsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUCxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWFzdXJqeWEtcG9ydGZvbGlvLy4vbm9kZV9tb2R1bGVzL2dlb2lwLWxpdGUvbGliL2dlb2lwLmpzPzIxMzYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbnZhciBuZXQgPSByZXF1aXJlKCduZXQnKTtcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5mcy5leGlzdHNTeW5jID0gZnMuZXhpc3RzU3luYyB8fCBwYXRoLmV4aXN0c1N5bmM7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBmc1dhdGNoZXIgPSByZXF1aXJlKCcuL2ZzV2F0Y2hlcicpO1xudmFyIGFzeW5jID0gcmVxdWlyZSgnYXN5bmMnKTtcblxudmFyIHdhdGNoZXJOYW1lID0gJ2RhdGFXYXRjaGVyJztcblxudmFyIGdlb2RhdGFkaXIgPSBwYXRoLnJlc29sdmUoXG5cdF9fZGlybmFtZSxcblx0Z2xvYmFsLmdlb2RhdGFkaXIgfHwgcHJvY2Vzcy5lbnYuR0VPREFUQURJUiB8fCAnLi4vZGF0YS8nXG4pO1xuXG52YXIgZGF0YUZpbGVzID0ge1xuXHRjaXR5OiBwYXRoLmpvaW4oZ2VvZGF0YWRpciwgJ2dlb2lwLWNpdHkuZGF0JyksXG5cdGNpdHk2OiBwYXRoLmpvaW4oZ2VvZGF0YWRpciwgJ2dlb2lwLWNpdHk2LmRhdCcpLFxuXHRjaXR5TmFtZXM6IHBhdGguam9pbihnZW9kYXRhZGlyLCAnZ2VvaXAtY2l0eS1uYW1lcy5kYXQnKSxcblx0Y291bnRyeTogcGF0aC5qb2luKGdlb2RhdGFkaXIsICdnZW9pcC1jb3VudHJ5LmRhdCcpLFxuXHRjb3VudHJ5NjogcGF0aC5qb2luKGdlb2RhdGFkaXIsICdnZW9pcC1jb3VudHJ5Ni5kYXQnKVxufTtcblxudmFyIHByaXZhdGVSYW5nZTQgPSBbXG5cdFt1dGlscy5hdG9uNCgnMTAuMC4wLjAnKSwgdXRpbHMuYXRvbjQoJzEwLjI1NS4yNTUuMjU1JyldLFxuXHRbdXRpbHMuYXRvbjQoJzE3Mi4xNi4wLjAnKSwgdXRpbHMuYXRvbjQoJzE3Mi4zMS4yNTUuMjU1JyldLFxuXHRbdXRpbHMuYXRvbjQoJzE5Mi4xNjguMC4wJyksIHV0aWxzLmF0b240KCcxOTIuMTY4LjI1NS4yNTUnKV1cbl07XG5cbnZhciBjb25mNCA9IHtcblx0Zmlyc3RJUDogbnVsbCxcblx0bGFzdElQOiBudWxsLFxuXHRsYXN0TGluZTogMCxcblx0bG9jYXRpb25CdWZmZXI6IG51bGwsXG5cdGxvY2F0aW9uUmVjb3JkU2l6ZTogODgsXG5cdG1haW5CdWZmZXI6IG51bGwsXG5cdHJlY29yZFNpemU6IDI0XG59O1xuXG52YXIgY29uZjYgPSB7XG5cdGZpcnN0SVA6IG51bGwsXG5cdGxhc3RJUDogbnVsbCxcblx0bGFzdExpbmU6IDAsXG5cdG1haW5CdWZmZXI6IG51bGwsXG5cdHJlY29yZFNpemU6IDQ4XG59O1xuXG4vL2NvcHkgb3JpZ2luYWwgY29uZmlnc1xudmFyIGNhY2hlNCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZjQpKTtcbnZhciBjYWNoZTYgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbmY2KSk7XG5cbnZhciBSRUNPUkRfU0laRSA9IDEwO1xudmFyIFJFQ09SRF9TSVpFNiA9IDM0O1xuXG5mdW5jdGlvbiBsb29rdXA0KGlwKSB7XG5cdHZhciBmbGluZSA9IDA7XG5cdHZhciBmbG9vciA9IGNhY2hlNC5sYXN0SVA7XG5cdHZhciBjbGluZSA9IGNhY2hlNC5sYXN0TGluZTtcblx0dmFyIGNlaWwgPSBjYWNoZTQuZmlyc3RJUDtcblx0dmFyIGxpbmU7XG5cdHZhciBsb2NJZDtcblxuXHR2YXIgYnVmZmVyID0gY2FjaGU0Lm1haW5CdWZmZXI7XG5cdHZhciBsb2NCdWZmZXIgPSBjYWNoZTQubG9jYXRpb25CdWZmZXI7XG5cdHZhciBwcml2YXRlUmFuZ2UgPSBwcml2YXRlUmFuZ2U0O1xuXHR2YXIgcmVjb3JkU2l6ZSA9IGNhY2hlNC5yZWNvcmRTaXplO1xuXHR2YXIgbG9jUmVjb3JkU2l6ZSA9IGNhY2hlNC5sb2NhdGlvblJlY29yZFNpemU7XG5cblx0dmFyIGk7XG5cblx0dmFyIGdlb2RhdGEgPSB7XG5cdFx0cmFuZ2U6ICcnLFxuXHRcdGNvdW50cnk6ICcnLFxuXHRcdHJlZ2lvbjogJycsXG5cdFx0ZXU6JycsXG5cdFx0dGltZXpvbmU6JycsXG5cdFx0Y2l0eTogJycsXG5cdFx0bGw6IFtudWxsLCBudWxsXVxuXHR9O1xuXG5cdC8vIG91dHNpZGUgSVB2NCByYW5nZVxuXHRpZiAoaXAgPiBjYWNoZTQubGFzdElQIHx8IGlwIDwgY2FjaGU0LmZpcnN0SVApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIHByaXZhdGUgSVBcblx0Zm9yIChpID0gMDsgaSA8IHByaXZhdGVSYW5nZS5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChpcCA+PSBwcml2YXRlUmFuZ2VbaV1bMF0gJiYgaXAgPD0gcHJpdmF0ZVJhbmdlW2ldWzFdKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRkbyB7XG5cdFx0bGluZSA9IE1hdGgucm91bmQoKGNsaW5lIC0gZmxpbmUpIC8gMikgKyBmbGluZTtcblx0XHRmbG9vciA9IGJ1ZmZlci5yZWFkVUludDMyQkUobGluZSAqIHJlY29yZFNpemUpO1xuXHRcdGNlaWwgID0gYnVmZmVyLnJlYWRVSW50MzJCRSgobGluZSAqIHJlY29yZFNpemUpICsgNCk7XG5cblx0XHRpZiAoZmxvb3IgPD0gaXAgJiYgY2VpbCA+PSBpcCkge1xuXHRcdFx0Z2VvZGF0YS5yYW5nZSA9IFtmbG9vciwgY2VpbF07XG5cblx0XHRcdGlmIChyZWNvcmRTaXplID09PSBSRUNPUkRfU0laRSkge1xuXHRcdFx0XHRnZW9kYXRhLmNvdW50cnkgPSBidWZmZXIudG9TdHJpbmcoJ3V0ZjgnLCAobGluZSAqIHJlY29yZFNpemUpICsgOCwgKGxpbmUgKiByZWNvcmRTaXplKSArIDEwKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxvY0lkID0gYnVmZmVyLnJlYWRVSW50MzJCRSgobGluZSAqIHJlY29yZFNpemUpICsgOCk7XG5cblx0XHRcdFx0Ly8gLTE+Pj4wIGlzIGEgbWFya2VyIGZvciBcIk5vIExvY2F0aW9uIEluZm9cIlxuXHRcdFx0XHRpZigtMT4+PjAgPiBsb2NJZCkge1xuXHRcdFx0XHRcdGdlb2RhdGEuY291bnRyeSA9IGxvY0J1ZmZlci50b1N0cmluZygndXRmOCcsIChsb2NJZCAqIGxvY1JlY29yZFNpemUpICsgMCwgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyAyKS5yZXBsYWNlKC9cXHUwMDAwLiovLCAnJyk7XG5cdFx0XHRcdFx0Z2VvZGF0YS5yZWdpb24gPSBsb2NCdWZmZXIudG9TdHJpbmcoJ3V0ZjgnLCAobG9jSWQgKiBsb2NSZWNvcmRTaXplKSArIDIsIChsb2NJZCAqIGxvY1JlY29yZFNpemUpICsgNSkucmVwbGFjZSgvXFx1MDAwMC4qLywgJycpO1xuXHRcdFx0XHRcdGdlb2RhdGEubWV0cm8gPSBsb2NCdWZmZXIucmVhZEludDMyQkUoKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyA1KTtcblx0XHRcdFx0XHRnZW9kYXRhLmxsWzBdID0gYnVmZmVyLnJlYWRJbnQzMkJFKChsaW5lICogcmVjb3JkU2l6ZSkgKyAxMikvMTAwMDA7Ly9sYXRpdHVkZVxuXHRcdFx0XHRcdGdlb2RhdGEubGxbMV0gPSBidWZmZXIucmVhZEludDMyQkUoKGxpbmUgKiByZWNvcmRTaXplKSArIDE2KS8xMDAwMDsgLy9sb25naXR1ZGVcblx0XHRcdFx0XHRnZW9kYXRhLmFyZWEgPSBidWZmZXIucmVhZFVJbnQzMkJFKChsaW5lICogcmVjb3JkU2l6ZSkgKyAyMCk7IC8vbG9uZ2l0dWRlXG5cdFx0XHRcdFx0Z2VvZGF0YS5ldSA9IGxvY0J1ZmZlci50b1N0cmluZygndXRmOCcsIChsb2NJZCAqIGxvY1JlY29yZFNpemUpICsgOSwgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyAxMCkucmVwbGFjZSgvXFx1MDAwMC4qLywgJycpO1xuXHRcdFx0XHRcdGdlb2RhdGEudGltZXpvbmUgPSBsb2NCdWZmZXIudG9TdHJpbmcoJ3V0ZjgnLCAobG9jSWQgKiBsb2NSZWNvcmRTaXplKSArIDEwLCAobG9jSWQgKiBsb2NSZWNvcmRTaXplKSArIDQyKS5yZXBsYWNlKC9cXHUwMDAwLiovLCAnJyk7XG5cdFx0XHRcdFx0Z2VvZGF0YS5jaXR5ID0gbG9jQnVmZmVyLnRvU3RyaW5nKCd1dGY4JywgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyA0MiwgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyBsb2NSZWNvcmRTaXplKS5yZXBsYWNlKC9cXHUwMDAwLiovLCAnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGdlb2RhdGE7XG5cdFx0fSBlbHNlIGlmIChmbGluZSA9PT0gY2xpbmUpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0gZWxzZSBpZiAoZmxpbmUgPT09IChjbGluZSAtIDEpKSB7XG5cdFx0XHRpZiAobGluZSA9PT0gZmxpbmUpIHtcblx0XHRcdFx0ZmxpbmUgPSBjbGluZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsaW5lID0gZmxpbmU7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChmbG9vciA+IGlwKSB7XG5cdFx0XHRjbGluZSA9IGxpbmU7XG5cdFx0fSBlbHNlIGlmIChjZWlsIDwgaXApIHtcblx0XHRcdGZsaW5lID0gbGluZTtcblx0XHR9XG5cdH0gd2hpbGUoMSk7XG59XG5cbmZ1bmN0aW9uIGxvb2t1cDYoaXApIHtcblx0dmFyIGJ1ZmZlciA9IGNhY2hlNi5tYWluQnVmZmVyO1xuXHR2YXIgcmVjb3JkU2l6ZSA9IGNhY2hlNi5yZWNvcmRTaXplO1xuXHR2YXIgbG9jQnVmZmVyID0gY2FjaGU0LmxvY2F0aW9uQnVmZmVyO1xuXHR2YXIgbG9jUmVjb3JkU2l6ZSA9IGNhY2hlNC5sb2NhdGlvblJlY29yZFNpemU7XG5cblx0dmFyIGdlb2RhdGEgPSB7XG5cdFx0cmFuZ2U6ICcnLFxuXHRcdGNvdW50cnk6ICcnLFxuXHRcdHJlZ2lvbjogJycsXG5cdFx0Y2l0eTogJycsXG5cdFx0bGw6IFswLCAwXVxuXHR9O1xuXHRmdW5jdGlvbiByZWFkaXAobGluZSwgb2Zmc2V0KSB7XG5cdFx0dmFyIGlpID0gMDtcblx0XHR2YXIgaXAgPSBbXTtcblxuXHRcdGZvciAoaWkgPSAwOyBpaSA8IDI7IGlpKyspIHtcblx0XHRcdGlwLnB1c2goYnVmZmVyLnJlYWRVSW50MzJCRSgobGluZSAqIHJlY29yZFNpemUpICsgKG9mZnNldCAqIDE2KSArIChpaSAqIDQpKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGlwO1xuXHR9XG5cblx0Y2FjaGU2Lmxhc3RJUCA9IHJlYWRpcChjYWNoZTYubGFzdExpbmUsIDEpO1xuXHRjYWNoZTYuZmlyc3RJUCA9IHJlYWRpcCgwLCAwKTtcblxuXHR2YXIgZmxpbmUgPSAwO1xuXHR2YXIgZmxvb3IgPSBjYWNoZTYubGFzdElQO1xuXHR2YXIgY2xpbmUgPSBjYWNoZTYubGFzdExpbmU7XG5cdHZhciBjZWlsID0gY2FjaGU2LmZpcnN0SVA7XG5cdHZhciBsaW5lO1xuXHR2YXIgbG9jSWQ7XG5cblx0aWYgKHV0aWxzLmNtcDYoaXAsIGNhY2hlNi5sYXN0SVApID4gMCB8fCB1dGlscy5jbXA2KGlwLCBjYWNoZTYuZmlyc3RJUCkgPCAwKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRkbyB7XG5cdFx0bGluZSA9IE1hdGgucm91bmQoKGNsaW5lIC0gZmxpbmUpIC8gMikgKyBmbGluZTtcblx0XHRmbG9vciA9IHJlYWRpcChsaW5lLCAwKTtcblx0XHRjZWlsICA9IHJlYWRpcChsaW5lLCAxKTtcblxuXHRcdGlmICh1dGlscy5jbXA2KGZsb29yLCBpcCkgPD0gMCAmJiB1dGlscy5jbXA2KGNlaWwsIGlwKSA+PSAwKSB7XG5cdFx0XHRpZiAocmVjb3JkU2l6ZSA9PT0gUkVDT1JEX1NJWkU2KSB7XG5cdFx0XHRcdGdlb2RhdGEuY291bnRyeSA9IGJ1ZmZlci50b1N0cmluZygndXRmOCcsIChsaW5lICogcmVjb3JkU2l6ZSkgKyAzMiwgKGxpbmUgKiByZWNvcmRTaXplKSArIDM0KS5yZXBsYWNlKC9cXHUwMDAwLiovLCAnJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsb2NJZCA9IGJ1ZmZlci5yZWFkVUludDMyQkUoKGxpbmUgKiByZWNvcmRTaXplKSArIDMyKTtcblxuXHRcdFx0XHQvLyAtMT4+PjAgaXMgYSBtYXJrZXIgZm9yIFwiTm8gTG9jYXRpb24gSW5mb1wiXG5cdFx0XHRcdGlmKC0xPj4+MCA+IGxvY0lkKSB7XG5cdFx0XHRcdFx0Z2VvZGF0YS5jb3VudHJ5ID0gbG9jQnVmZmVyLnRvU3RyaW5nKCd1dGY4JywgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyAwLCAobG9jSWQgKiBsb2NSZWNvcmRTaXplKSArIDIpLnJlcGxhY2UoL1xcdTAwMDAuKi8sICcnKTtcblx0XHRcdFx0XHRnZW9kYXRhLnJlZ2lvbiA9IGxvY0J1ZmZlci50b1N0cmluZygndXRmOCcsIChsb2NJZCAqIGxvY1JlY29yZFNpemUpICsgMiwgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyA1KS5yZXBsYWNlKC9cXHUwMDAwLiovLCAnJyk7XG5cdFx0XHRcdFx0Z2VvZGF0YS5tZXRybyA9IGxvY0J1ZmZlci5yZWFkSW50MzJCRSgobG9jSWQgKiBsb2NSZWNvcmRTaXplKSArIDUpO1xuXHRcdFx0XHRcdGdlb2RhdGEubGxbMF0gPSBidWZmZXIucmVhZEludDMyQkUoKGxpbmUgKiByZWNvcmRTaXplKSArIDM2KS8xMDAwMDsvL2xhdGl0dWRlXG5cdFx0XHRcdFx0Z2VvZGF0YS5sbFsxXSA9IGJ1ZmZlci5yZWFkSW50MzJCRSgobGluZSAqIHJlY29yZFNpemUpICsgNDApLzEwMDAwOyAvL2xvbmdpdHVkZVxuXHRcdFx0XHRcdGdlb2RhdGEuYXJlYSA9IGJ1ZmZlci5yZWFkVUludDMyQkUoKGxpbmUgKiByZWNvcmRTaXplKSArIDQ0KTsgLy9hcmVhXG5cdFx0XHRcdFx0Z2VvZGF0YS5ldSA9IGxvY0J1ZmZlci50b1N0cmluZygndXRmOCcsIChsb2NJZCAqIGxvY1JlY29yZFNpemUpICsgOSwgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyAxMCkucmVwbGFjZSgvXFx1MDAwMC4qLywgJycpO1xuXHRcdFx0XHRcdGdlb2RhdGEudGltZXpvbmUgPSBsb2NCdWZmZXIudG9TdHJpbmcoJ3V0ZjgnLCAobG9jSWQgKiBsb2NSZWNvcmRTaXplKSArIDEwLCAobG9jSWQgKiBsb2NSZWNvcmRTaXplKSArIDQyKS5yZXBsYWNlKC9cXHUwMDAwLiovLCAnJyk7XG5cdFx0XHRcdFx0Z2VvZGF0YS5jaXR5ID0gbG9jQnVmZmVyLnRvU3RyaW5nKCd1dGY4JywgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyA0MiwgKGxvY0lkICogbG9jUmVjb3JkU2l6ZSkgKyBsb2NSZWNvcmRTaXplKS5yZXBsYWNlKC9cXHUwMDAwLiovLCAnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIFdlIGRvIG5vdCBjdXJyZW50bHkgaGF2ZSBkZXRhaWxlZCByZWdpb24vY2l0eSBpbmZvIGZvciBJUHY2LCBidXQgZmluYWxseSBoYXZlIGNvb3Jkc1xuXHRcdFx0cmV0dXJuIGdlb2RhdGE7XG5cdFx0fSBlbHNlIGlmIChmbGluZSA9PT0gY2xpbmUpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0gZWxzZSBpZiAoZmxpbmUgPT09IChjbGluZSAtIDEpKSB7XG5cdFx0XHRpZiAobGluZSA9PT0gZmxpbmUpIHtcblx0XHRcdFx0ZmxpbmUgPSBjbGluZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsaW5lID0gZmxpbmU7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh1dGlscy5jbXA2KGZsb29yLCBpcCkgPiAwKSB7XG5cdFx0XHRjbGluZSA9IGxpbmU7XG5cdFx0fSBlbHNlIGlmICh1dGlscy5jbXA2KGNlaWwsIGlwKSA8IDApIHtcblx0XHRcdGZsaW5lID0gbGluZTtcblx0XHR9XG5cdH0gd2hpbGUoMSk7XG59XG5cbmZ1bmN0aW9uIGdldDRtYXBwZWQoaXApIHtcblx0dmFyIGlwdjYgPSBpcC50b1VwcGVyQ2FzZSgpO1xuXHR2YXIgdjZwcmVmaXhlcyA9IFsnMDowOjA6MDowOkZGRkY6JywgJzo6RkZGRjonXTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2NnByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHY2cHJlZml4ID0gdjZwcmVmaXhlc1tpXTtcblx0XHRpZiAoaXB2Ni5pbmRleE9mKHY2cHJlZml4KSA9PSAwKSB7XG5cdFx0XHRyZXR1cm4gaXB2Ni5zdWJzdHJpbmcodjZwcmVmaXgubGVuZ3RoKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHByZWxvYWQoY2FsbGJhY2spIHtcblx0dmFyIGRhdEZpbGU7XG5cdHZhciBkYXRTaXplO1xuXHR2YXIgYXN5bmNDYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZjQpKTtcblxuXHQvL3doZW4gdGhlIHByZWxvYWQgZnVuY3Rpb24gcmVjZWl2ZXMgYSBjYWxsYmFjaywgZG8gdGhlIHRhc2sgYXN5bmNocm9ub3VzbHlcblx0aWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbicpIHtcblx0XHRhc3luYy5zZXJpZXMoW1xuXHRcdFx0ZnVuY3Rpb24gKGNiKSB7XG5cdFx0XHRcdGFzeW5jLnNlcmllcyhbXG5cdFx0XHRcdFx0ZnVuY3Rpb24gKGNiMikge1xuXHRcdFx0XHRcdFx0ZnMub3BlbihkYXRhRmlsZXMuY2l0eU5hbWVzLCAncicsIGZ1bmN0aW9uIChlcnIsIGZpbGUpIHtcblx0XHRcdFx0XHRcdFx0ZGF0RmlsZSA9IGZpbGU7XG5cdFx0XHRcdFx0XHRcdGNiMihlcnIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiAoY2IyKSB7XG5cdFx0XHRcdFx0XHRmcy5mc3RhdChkYXRGaWxlLCBmdW5jdGlvbiAoZXJyLCBzdGF0cykge1xuXHRcdFx0XHRcdFx0XHRkYXRTaXplID0gc3RhdHMuc2l6ZTtcblx0XHRcdFx0XHRcdFx0YXN5bmNDYWNoZS5sb2NhdGlvbkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyhkYXRTaXplKTtcblx0XHRcdFx0XHRcdFx0Y2IyKGVycik7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIChjYjIpIHtcblx0XHRcdFx0XHRcdGZzLnJlYWQoZGF0RmlsZSwgYXN5bmNDYWNoZS5sb2NhdGlvbkJ1ZmZlciwgMCwgZGF0U2l6ZSwgMCwgY2IyKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIChjYjIpIHtcblx0XHRcdFx0XHRcdGZzLmNsb3NlKGRhdEZpbGUsIGNiMik7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiAoY2IyKSB7XG5cdFx0XHRcdFx0XHRmcy5vcGVuKGRhdGFGaWxlcy5jaXR5LCAncicsIGZ1bmN0aW9uIChlcnIsIGZpbGUpIHtcblx0XHRcdFx0XHRcdFx0ZGF0RmlsZSA9IGZpbGU7XG5cdFx0XHRcdFx0XHRcdGNiMihlcnIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbiAoY2IyKSB7XG5cdFx0XHRcdFx0XHRmcy5mc3RhdChkYXRGaWxlLCBmdW5jdGlvbiAoZXJyLCBzdGF0cykge1xuXHRcdFx0XHRcdFx0XHRkYXRTaXplID0gc3RhdHMuc2l6ZTtcblx0XHRcdFx0XHRcdFx0Y2IyKGVycik7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdF0sIGZ1bmN0aW9uIChlcnIpIHtcblx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRpZiAoZXJyLmNvZGUgIT09ICdFTk9FTlQnICYmIGVyci5jb2RlICE9PSAnRUJBREYnKSB7XG5cdFx0XHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZnMub3BlbihkYXRhRmlsZXMuY291bnRyeSwgJ3InLCBmdW5jdGlvbiAoZXJyLCBmaWxlKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGRhdEZpbGUgPSBmaWxlO1xuXHRcdFx0XHRcdFx0XHRcdGZzLmZzdGF0KGRhdEZpbGUsIGZ1bmN0aW9uIChlcnIsIHN0YXRzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRTaXplID0gc3RhdHMuc2l6ZTtcblx0XHRcdFx0XHRcdFx0XHRcdGFzeW5jQ2FjaGUucmVjb3JkU2l6ZSA9IFJFQ09SRF9TSVpFO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRjYigpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjYigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRhc3luY0NhY2hlLm1haW5CdWZmZXIgPSBCdWZmZXIuYWxsb2MoZGF0U2l6ZSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRhc3luYy5zZXJpZXMoW1xuXHRcdFx0XHRcdGZ1bmN0aW9uIChjYjIpIHtcblx0XHRcdFx0XHRcdGZzLnJlYWQoZGF0RmlsZSwgYXN5bmNDYWNoZS5tYWluQnVmZmVyLCAwLCBkYXRTaXplLCAwLCBjYjIpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gKGNiMikge1xuXHRcdFx0XHRcdFx0ZnMuY2xvc2UoZGF0RmlsZSwgY2IyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdF0sIGZ1bmN0aW9uIChlcnIpIHtcblx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHQvL2tlZXAgb2xkIGNhY2hlXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGFzeW5jQ2FjaGUubGFzdExpbmUgPSAoZGF0U2l6ZSAvIGFzeW5jQ2FjaGUucmVjb3JkU2l6ZSkgLSAxO1xuXHRcdFx0XHRcdFx0YXN5bmNDYWNoZS5sYXN0SVAgPSBhc3luY0NhY2hlLm1haW5CdWZmZXIucmVhZFVJbnQzMkJFKChhc3luY0NhY2hlLmxhc3RMaW5lICogYXN5bmNDYWNoZS5yZWNvcmRTaXplKSArIDQpO1xuXHRcdFx0XHRcdFx0YXN5bmNDYWNoZS5maXJzdElQID0gYXN5bmNDYWNoZS5tYWluQnVmZmVyLnJlYWRVSW50MzJCRSgwKTtcblx0XHRcdFx0XHRcdGNhY2hlNCA9IGFzeW5jQ2FjaGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNhbGxiYWNrKGVycik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdF0pO1xuXHR9IGVsc2Uge1xuXHRcdHRyeSB7XG5cdFx0XHRkYXRGaWxlID0gZnMub3BlblN5bmMoZGF0YUZpbGVzLmNpdHlOYW1lcywgJ3InKTtcblx0XHRcdGRhdFNpemUgPSBmcy5mc3RhdFN5bmMoZGF0RmlsZSkuc2l6ZTtcblxuXHRcdFx0aWYgKGRhdFNpemUgPT09IDApIHtcblx0XHRcdFx0dGhyb3cge1xuXHRcdFx0XHRcdGNvZGU6ICdFTVBUWV9GSUxFJ1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRjYWNoZTQubG9jYXRpb25CdWZmZXIgPSBCdWZmZXIuYWxsb2MoZGF0U2l6ZSk7XG5cdFx0XHRmcy5yZWFkU3luYyhkYXRGaWxlLCBjYWNoZTQubG9jYXRpb25CdWZmZXIsIDAsIGRhdFNpemUsIDApO1xuXHRcdFx0ZnMuY2xvc2VTeW5jKGRhdEZpbGUpO1xuXG5cdFx0XHRkYXRGaWxlID0gZnMub3BlblN5bmMoZGF0YUZpbGVzLmNpdHksICdyJyk7XG5cdFx0XHRkYXRTaXplID0gZnMuZnN0YXRTeW5jKGRhdEZpbGUpLnNpemU7XG5cdFx0fSBjYXRjaChlcnIpIHtcblx0XHRcdGlmIChlcnIuY29kZSAhPT0gJ0VOT0VOVCcgJiYgZXJyLmNvZGUgIT09ICdFQkFERicgJiYgZXJyLmNvZGUgIT09ICdFTVBUWV9GSUxFJykge1xuXHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHR9XG5cblx0XHRcdGRhdEZpbGUgPSBmcy5vcGVuU3luYyhkYXRhRmlsZXMuY291bnRyeSwgJ3InKTtcblx0XHRcdGRhdFNpemUgPSBmcy5mc3RhdFN5bmMoZGF0RmlsZSkuc2l6ZTtcblx0XHRcdGNhY2hlNC5yZWNvcmRTaXplID0gUkVDT1JEX1NJWkU7XG5cdFx0fVxuXG5cdFx0Y2FjaGU0Lm1haW5CdWZmZXIgPSBCdWZmZXIuYWxsb2MoZGF0U2l6ZSk7XG5cdFx0ZnMucmVhZFN5bmMoZGF0RmlsZSwgY2FjaGU0Lm1haW5CdWZmZXIsIDAsIGRhdFNpemUsIDApO1xuXG5cdFx0ZnMuY2xvc2VTeW5jKGRhdEZpbGUpO1xuXG5cdFx0Y2FjaGU0Lmxhc3RMaW5lID0gKGRhdFNpemUgLyBjYWNoZTQucmVjb3JkU2l6ZSkgLSAxO1xuXHRcdGNhY2hlNC5sYXN0SVAgPSBjYWNoZTQubWFpbkJ1ZmZlci5yZWFkVUludDMyQkUoKGNhY2hlNC5sYXN0TGluZSAqIGNhY2hlNC5yZWNvcmRTaXplKSArIDQpO1xuXHRcdGNhY2hlNC5maXJzdElQID0gY2FjaGU0Lm1haW5CdWZmZXIucmVhZFVJbnQzMkJFKDApO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHByZWxvYWQ2KGNhbGxiYWNrKSB7XG5cdHZhciBkYXRGaWxlO1xuXHR2YXIgZGF0U2l6ZTtcblx0dmFyIGFzeW5jQ2FjaGU2ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25mNikpO1xuXG5cdC8vd2hlbiB0aGUgcHJlbG9hZCBmdW5jdGlvbiByZWNlaXZlcyBhIGNhbGxiYWNrLCBkbyB0aGUgdGFzayBhc3luY2hyb25vdXNseVxuXHRpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGFzeW5jLnNlcmllcyhbXG5cdFx0XHRmdW5jdGlvbiAoY2IpIHtcblx0XHRcdFx0YXN5bmMuc2VyaWVzKFtcblx0XHRcdFx0XHRmdW5jdGlvbiAoY2IyKSB7XG5cdFx0XHRcdFx0XHRmcy5vcGVuKGRhdGFGaWxlcy5jaXR5NiwgJ3InLCBmdW5jdGlvbiAoZXJyLCBmaWxlKSB7XG5cdFx0XHRcdFx0XHRcdGRhdEZpbGUgPSBmaWxlO1xuXHRcdFx0XHRcdFx0XHRjYjIoZXJyKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24gKGNiMikge1xuXHRcdFx0XHRcdFx0ZnMuZnN0YXQoZGF0RmlsZSwgZnVuY3Rpb24gKGVyciwgc3RhdHMpIHtcblx0XHRcdFx0XHRcdFx0ZGF0U2l6ZSA9IHN0YXRzLnNpemU7XG5cdFx0XHRcdFx0XHRcdGNiMihlcnIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRdLCBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0aWYgKGVyci5jb2RlICE9PSAnRU5PRU5UJyAmJiBlcnIuY29kZSAhPT0gJ0VCQURGJykge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGZzLm9wZW4oZGF0YUZpbGVzLmNvdW50cnk2LCAncicsIGZ1bmN0aW9uIChlcnIsIGZpbGUpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdGNiKGVycik7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0RmlsZSA9IGZpbGU7XG5cdFx0XHRcdFx0XHRcdFx0ZnMuZnN0YXQoZGF0RmlsZSwgZnVuY3Rpb24gKGVyciwgc3RhdHMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdFNpemUgPSBzdGF0cy5zaXplO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXN5bmNDYWNoZTYucmVjb3JkU2l6ZSA9IFJFQ09SRF9TSVpFNjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Y2IoKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNiKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGFzeW5jQ2FjaGU2Lm1haW5CdWZmZXIgPSBCdWZmZXIuYWxsb2MoZGF0U2l6ZSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRhc3luYy5zZXJpZXMoW1xuXHRcdFx0XHRcdGZ1bmN0aW9uIChjYjIpIHtcblx0XHRcdFx0XHRcdGZzLnJlYWQoZGF0RmlsZSwgYXN5bmNDYWNoZTYubWFpbkJ1ZmZlciwgMCwgZGF0U2l6ZSwgMCwgY2IyKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIChjYjIpIHtcblx0XHRcdFx0XHRcdGZzLmNsb3NlKGRhdEZpbGUsIGNiMik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRdLCBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0Ly9rZWVwIG9sZCBjYWNoZVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRhc3luY0NhY2hlNi5sYXN0TGluZSA9IChkYXRTaXplIC8gYXN5bmNDYWNoZTYucmVjb3JkU2l6ZSkgLSAxO1xuXHRcdFx0XHRcdFx0Y2FjaGU2ID0gYXN5bmNDYWNoZTY7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNhbGxiYWNrKGVycik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdF0pO1xuXHR9IGVsc2Uge1xuXHRcdHRyeSB7XG5cdFx0XHRkYXRGaWxlID0gZnMub3BlblN5bmMoZGF0YUZpbGVzLmNpdHk2LCAncicpO1xuXHRcdFx0ZGF0U2l6ZSA9IGZzLmZzdGF0U3luYyhkYXRGaWxlKS5zaXplO1xuXG5cdFx0XHRpZiAoZGF0U2l6ZSA9PT0gMCkge1xuXHRcdFx0XHR0aHJvdyB7XG5cdFx0XHRcdFx0Y29kZTogJ0VNUFRZX0ZJTEUnXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSBjYXRjaChlcnIpIHtcblx0XHRcdGlmIChlcnIuY29kZSAhPT0gJ0VOT0VOVCcgJiYgZXJyLmNvZGUgIT09ICdFQkFERicgJiYgZXJyLmNvZGUgIT09ICdFTVBUWV9GSUxFJykge1xuXHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHR9XG5cblx0XHRcdGRhdEZpbGUgPSBmcy5vcGVuU3luYyhkYXRhRmlsZXMuY291bnRyeTYsICdyJyk7XG5cdFx0XHRkYXRTaXplID0gZnMuZnN0YXRTeW5jKGRhdEZpbGUpLnNpemU7XG5cdFx0XHRjYWNoZTYucmVjb3JkU2l6ZSA9IFJFQ09SRF9TSVpFNjtcblx0XHR9XG5cblx0XHRjYWNoZTYubWFpbkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyhkYXRTaXplKTtcblx0XHRmcy5yZWFkU3luYyhkYXRGaWxlLCBjYWNoZTYubWFpbkJ1ZmZlciwgMCwgZGF0U2l6ZSwgMCk7XG5cblx0XHRmcy5jbG9zZVN5bmMoZGF0RmlsZSk7XG5cblx0XHRjYWNoZTYubGFzdExpbmUgPSAoZGF0U2l6ZSAvIGNhY2hlNi5yZWNvcmRTaXplKSAtIDE7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdGNtcDogdXRpbHMuY21wLFxuXG5cdGxvb2t1cDogZnVuY3Rpb24oaXApIHtcblx0XHRpZiAoIWlwKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBpcCA9PT0gJ251bWJlcicpIHtcblx0XHRcdHJldHVybiBsb29rdXA0KGlwKTtcblx0XHR9IGVsc2UgaWYgKG5ldC5pc0lQKGlwKSA9PT0gNCkge1xuXHRcdFx0cmV0dXJuIGxvb2t1cDQodXRpbHMuYXRvbjQoaXApKTtcblx0XHR9IGVsc2UgaWYgKG5ldC5pc0lQKGlwKSA9PT0gNikge1xuXHRcdFx0dmFyIGlwdjQgPSBnZXQ0bWFwcGVkKGlwKTtcblx0XHRcdGlmIChpcHY0KSB7XG5cdFx0XHRcdHJldHVybiBsb29rdXA0KHV0aWxzLmF0b240KGlwdjQpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBsb29rdXA2KHV0aWxzLmF0b242KGlwKSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cblx0cHJldHR5OiBmdW5jdGlvbihuKSB7XG5cdFx0aWYgKHR5cGVvZiBuID09PSAnc3RyaW5nJykge1xuXHRcdFx0cmV0dXJuIG47XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgbiA9PT0gJ251bWJlcicpIHtcblx0XHRcdHJldHVybiB1dGlscy5udG9hNChuKTtcblx0XHR9IGVsc2UgaWYgKG4gaW5zdGFuY2VvZiBBcnJheSkge1xuXHRcdFx0cmV0dXJuIHV0aWxzLm50b2E2KG4pO1xuXHRcdH1cblxuXHRcdHJldHVybiBuO1xuXHR9LFxuXG5cdC8vIFN0YXJ0IHdhdGNoaW5nIGZvciBkYXRhIHVwZGF0ZXMuIFRoZSB3YXRjaGVyIHdhaXRzIG9uZSBtaW51dGUgZm9yIGZpbGUgdHJhbnNmZXIgdG8gXG5cdC8vIGNvbXBsZXRldGUgYmVmb3JlIHRyaWdnZXJpbmcgdGhlIGNhbGxiYWNrLlxuXHRzdGFydFdhdGNoaW5nRGF0YVVwZGF0ZTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdFx0ZnNXYXRjaGVyLm1ha2VGc1dhdGNoRmlsdGVyKHdhdGNoZXJOYW1lLCBnZW9kYXRhZGlyLCA2MCoxMDAwLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQvL1JlbG9hZCBkYXRhXG5cdFx0XHRhc3luYy5zZXJpZXMoW1xuXHRcdFx0XHRmdW5jdGlvbiAoY2IpIHtcblx0XHRcdFx0XHRwcmVsb2FkKGNiKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gKGNiKSB7XG5cdFx0XHRcdFx0cHJlbG9hZDYoY2IpO1xuXHRcdFx0XHR9XG5cdFx0XHRdLCBjYWxsYmFjayk7XG5cdFx0fSk7XG5cdH0sXG5cblx0Ly8gU3RvcCB3YXRjaGluZyBmb3IgZGF0YSB1cGRhdGVzLlxuXHRzdG9wV2F0Y2hpbmdEYXRhVXBkYXRlOiBmdW5jdGlvbiAoKSB7XG5cdFx0ZnNXYXRjaGVyLnN0b3BXYXRjaGluZyh3YXRjaGVyTmFtZSk7XG5cdH0sXG4gICAgXG5cdC8vY2xlYXIgZGF0YVxuXHRjbGVhcjogZnVuY3Rpb24gKCkge1xuXHRcdGNhY2hlNCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZjQpKTtcblx0XHRjYWNoZTYgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbmY2KSk7XG5cdH0sXG5cdFxuXHQvLyBSZWxvYWQgZGF0YSBzeW5jaHJvbm91c2x5XG5cdHJlbG9hZERhdGFTeW5jOiBmdW5jdGlvbiAoKSB7XG5cdFx0cHJlbG9hZCgpO1xuXHRcdHByZWxvYWQ2KCk7XG5cdH0sXG5cdFxuXHQvLyBSZWxvYWQgZGF0YSBhc3luY2hyb25vdXNseVxuXHRyZWxvYWREYXRhOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0XHQvL1JlbG9hZCBkYXRhXG5cdFx0YXN5bmMuc2VyaWVzKFtcblx0XHRcdGZ1bmN0aW9uIChjYikge1xuXHRcdFx0XHRwcmVsb2FkKGNiKTtcblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiAoY2IpIHtcblx0XHRcdFx0cHJlbG9hZDYoY2IpO1xuXHRcdFx0fVxuXHRcdF0sIGNhbGxiYWNrKTtcblx0fSxcbn07XG5cbnByZWxvYWQoKTtcbnByZWxvYWQ2KCk7XG5cbi8vbG9va3VwNCA9IGdlbl9sb29rdXAoJ2dlb2lwLWNvdW50cnkuZGF0JywgNCk7XG4vL2xvb2t1cDYgPSBnZW5fbG9va3VwKCdnZW9pcC1jb3VudHJ5Ni5kYXQnLCAxNik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/geoip-lite/lib/geoip.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/geoip-lite/lib/utils.js":
/*!**********************************************!*\
  !*** ./node_modules/geoip-lite/lib/utils.js ***!
  \**********************************************/
/***/ ((module) => {

eval("var utils = module.exports = {};\n\nutils.aton4 = function(a) {\n\ta = a.split(/\\./);\n\treturn ((parseInt(a[0], 10)<<24)>>>0) + ((parseInt(a[1], 10)<<16)>>>0) + ((parseInt(a[2], 10)<<8)>>>0) + (parseInt(a[3], 10)>>>0);\n};\n\nutils.aton6 = function(a) {\n\ta = a.replace(/\"/g, '').split(/:/);\n\n\tvar l = a.length - 1;\n\tvar i;\n\n\tif (a[l] === '') {\n\t\ta[l] = 0;\n\t}\n\n\tif (l < 7) {\n\t\ta.length = 8;\n\n\t\tfor (i = l; i >= 0 && a[i] !== ''; i--) {\n\t\t\ta[7-l+i] = a[i];\n\t\t}\n\t}\n\n\tfor (i = 0; i < 8; i++) {\n\t\tif (!a[i]) {\n\t\t\ta[i]=0;\n\t\t} else {\n\t\t\ta[i] = parseInt(a[i], 16);\n\t\t}\n\t}\n\n\tvar r = [];\n\tfor (i = 0; i<4; i++) {\n\t\tr.push(((a[2*i]<<16) + a[2*i+1])>>>0);\n\t}\n\n\treturn r;\n};\n\n\nutils.cmp = function(a, b) {\n\tif (typeof a === 'number' && typeof b === 'number') {\n\t\treturn (a < b ? -1 : (a > b ? 1 : 0));\n\t}\n\n\tif (a instanceof Array && b instanceof Array) {\n\t\treturn this.cmp6(a, b);\n\t}\n\n\treturn null;\n};\n\nutils.cmp6 = function(a, b) {\n\tfor (var ii = 0; ii < 2; ii++) {\n\t\tif (a[ii] < b[ii]) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (a[ii] > b[ii]) {\n\t\t\treturn 1;\n\t\t}\n\t}\n\n\treturn 0;\n};\n\nutils.isPrivateIP = function(addr) {\n\taddr = addr.toString();\n\n\treturn addr.match(/^10\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^192\\.168\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^172\\.16\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^169\\.254\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^fc00:/) != null || addr.match(/^fe80:/) != null;\n};\n\nutils.ntoa4 = function(n) {\n\tn = n.toString();\n\tn = '' + (n>>>24&0xff) + '.' + (n>>>16&0xff) + '.' + (n>>>8&0xff) + '.' + (n&0xff);\n\n\treturn n;\n};\n\nutils.ntoa6 = function(n) {\n\tvar a = \"[\";\n\n\tfor (var i = 0; i<n.length; i++) {\n\t\ta += (n[i]>>>16).toString(16) + ':';\n\t\ta += (n[i]&0xffff).toString(16) + ':';\n\t}\n\n\ta = a.replace(/:$/, ']').replace(/:0+/g, ':').replace(/::+/, '::');\n\n\treturn a;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZ2VvaXAtbGl0ZS9saWIvdXRpbHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGNBQWMsdUJBQXVCO0FBQ3JDO0FBQ0E7QUFDQTs7QUFFQSxhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLEtBQUs7QUFDbEI7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixRQUFRO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZ0NBQWdDLElBQUksVUFBVSxJQUFJLFVBQVUsSUFBSTtBQUNoRSxrQ0FBa0MsSUFBSSxVQUFVLElBQUk7QUFDcEQsaUNBQWlDLElBQUksVUFBVSxJQUFJO0FBQ25ELDZCQUE2QixJQUFJLFVBQVUsSUFBSSxVQUFVLElBQUk7QUFDN0Qsa0NBQWtDLElBQUksVUFBVSxJQUFJO0FBQ3BEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Fhc3VyanlhLXBvcnRmb2xpby8uL25vZGVfbW9kdWxlcy9nZW9pcC1saXRlL2xpYi91dGlscy5qcz9iM2I2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciB1dGlscyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbnV0aWxzLmF0b240ID0gZnVuY3Rpb24oYSkge1xuXHRhID0gYS5zcGxpdCgvXFwuLyk7XG5cdHJldHVybiAoKHBhcnNlSW50KGFbMF0sIDEwKTw8MjQpPj4+MCkgKyAoKHBhcnNlSW50KGFbMV0sIDEwKTw8MTYpPj4+MCkgKyAoKHBhcnNlSW50KGFbMl0sIDEwKTw8OCk+Pj4wKSArIChwYXJzZUludChhWzNdLCAxMCk+Pj4wKTtcbn07XG5cbnV0aWxzLmF0b242ID0gZnVuY3Rpb24oYSkge1xuXHRhID0gYS5yZXBsYWNlKC9cIi9nLCAnJykuc3BsaXQoLzovKTtcblxuXHR2YXIgbCA9IGEubGVuZ3RoIC0gMTtcblx0dmFyIGk7XG5cblx0aWYgKGFbbF0gPT09ICcnKSB7XG5cdFx0YVtsXSA9IDA7XG5cdH1cblxuXHRpZiAobCA8IDcpIHtcblx0XHRhLmxlbmd0aCA9IDg7XG5cblx0XHRmb3IgKGkgPSBsOyBpID49IDAgJiYgYVtpXSAhPT0gJyc7IGktLSkge1xuXHRcdFx0YVs3LWwraV0gPSBhW2ldO1xuXHRcdH1cblx0fVxuXG5cdGZvciAoaSA9IDA7IGkgPCA4OyBpKyspIHtcblx0XHRpZiAoIWFbaV0pIHtcblx0XHRcdGFbaV09MDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YVtpXSA9IHBhcnNlSW50KGFbaV0sIDE2KTtcblx0XHR9XG5cdH1cblxuXHR2YXIgciA9IFtdO1xuXHRmb3IgKGkgPSAwOyBpPDQ7IGkrKykge1xuXHRcdHIucHVzaCgoKGFbMippXTw8MTYpICsgYVsyKmkrMV0pPj4+MCk7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn07XG5cblxudXRpbHMuY21wID0gZnVuY3Rpb24oYSwgYikge1xuXHRpZiAodHlwZW9mIGEgPT09ICdudW1iZXInICYmIHR5cGVvZiBiID09PSAnbnVtYmVyJykge1xuXHRcdHJldHVybiAoYSA8IGIgPyAtMSA6IChhID4gYiA/IDEgOiAwKSk7XG5cdH1cblxuXHRpZiAoYSBpbnN0YW5jZW9mIEFycmF5ICYmIGIgaW5zdGFuY2VvZiBBcnJheSkge1xuXHRcdHJldHVybiB0aGlzLmNtcDYoYSwgYik7XG5cdH1cblxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbnV0aWxzLmNtcDYgPSBmdW5jdGlvbihhLCBiKSB7XG5cdGZvciAodmFyIGlpID0gMDsgaWkgPCAyOyBpaSsrKSB7XG5cdFx0aWYgKGFbaWldIDwgYltpaV0pIHtcblx0XHRcdHJldHVybiAtMTtcblx0XHR9XG5cblx0XHRpZiAoYVtpaV0gPiBiW2lpXSkge1xuXHRcdFx0cmV0dXJuIDE7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIDA7XG59O1xuXG51dGlscy5pc1ByaXZhdGVJUCA9IGZ1bmN0aW9uKGFkZHIpIHtcblx0YWRkciA9IGFkZHIudG9TdHJpbmcoKTtcblxuXHRyZXR1cm4gYWRkci5tYXRjaCgvXjEwXFwuKFswLTldezEsM30pXFwuKFswLTldezEsM30pXFwuKFswLTldezEsM30pLykgIT0gbnVsbCB8fFxuICAgIGFkZHIubWF0Y2goL14xOTJcXC4xNjhcXC4oWzAtOV17MSwzfSlcXC4oWzAtOV17MSwzfSkvKSAhPSBudWxsIHx8XG4gICAgYWRkci5tYXRjaCgvXjE3MlxcLjE2XFwuKFswLTldezEsM30pXFwuKFswLTldezEsM30pLykgIT0gbnVsbCB8fFxuICAgIGFkZHIubWF0Y2goL14xMjdcXC4oWzAtOV17MSwzfSlcXC4oWzAtOV17MSwzfSlcXC4oWzAtOV17MSwzfSkvKSAhPSBudWxsIHx8XG4gICAgYWRkci5tYXRjaCgvXjE2OVxcLjI1NFxcLihbMC05XXsxLDN9KVxcLihbMC05XXsxLDN9KS8pICE9IG51bGwgfHxcbiAgICBhZGRyLm1hdGNoKC9eZmMwMDovKSAhPSBudWxsIHx8IGFkZHIubWF0Y2goL15mZTgwOi8pICE9IG51bGw7XG59O1xuXG51dGlscy5udG9hNCA9IGZ1bmN0aW9uKG4pIHtcblx0biA9IG4udG9TdHJpbmcoKTtcblx0biA9ICcnICsgKG4+Pj4yNCYweGZmKSArICcuJyArIChuPj4+MTYmMHhmZikgKyAnLicgKyAobj4+PjgmMHhmZikgKyAnLicgKyAobiYweGZmKTtcblxuXHRyZXR1cm4gbjtcbn07XG5cbnV0aWxzLm50b2E2ID0gZnVuY3Rpb24obikge1xuXHR2YXIgYSA9IFwiW1wiO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpPG4ubGVuZ3RoOyBpKyspIHtcblx0XHRhICs9IChuW2ldPj4+MTYpLnRvU3RyaW5nKDE2KSArICc6Jztcblx0XHRhICs9IChuW2ldJjB4ZmZmZikudG9TdHJpbmcoMTYpICsgJzonO1xuXHR9XG5cblx0YSA9IGEucmVwbGFjZSgvOiQvLCAnXScpLnJlcGxhY2UoLzowKy9nLCAnOicpLnJlcGxhY2UoLzo6Ky8sICc6OicpO1xuXG5cdHJldHVybiBhO1xufTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/geoip-lite/lib/utils.js\n");

/***/ })

};
;